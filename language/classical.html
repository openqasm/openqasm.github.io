
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Classical instructions &#8212; OpenQASM Live Specification  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/colors.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Subroutines" href="subroutines.html" />
    <link rel="prev" title="Built-in quantum instructions" href="insts.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="classical-instructions">
<span id="id1"></span><h1>Classical instructions<a class="headerlink" href="#classical-instructions" title="Permalink to this heading">¶</a></h1>
<p>We envision two levels of classical control: simple, low-level instructions embedded as
part of a quantum circuit and high-level external functions which perform more complex
classical computations. The low-level functions allow basic
computations on lower-level parallel control processors. These instructions are likely
to have known durations and many such instructions might be executed
within the qubit coherence time. The external, or <code class="docutils literal notranslate"><span class="pre">extern</span></code>, functions execute
complex blocks of classical code that may be neither fast nor guaranteed to return. In order
to connect with classical compilation infrastucture, <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions are defined outside of
OpenQASM. The compiler toolchain is expected to link <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions when building an
executable. This strategy allows the programmer to use existing libraries without porting them into
OpenQASM. <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions run on a global processor concurrently with operations on local
processors, if possible. <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions can write to the global controller’s memory,
which may not be directly accessible by the local controllers.</p>
<section id="low-level-classical-instructions">
<h2>Low-level classical instructions<a class="headerlink" href="#low-level-classical-instructions" title="Permalink to this heading">¶</a></h2>
<section id="generalities">
<h3>Generalities<a class="headerlink" href="#generalities" title="Permalink to this heading">¶</a></h3>
<p>All types support the assignment operator <code class="docutils literal notranslate"><span class="pre">=</span></code>. The left-hand-side (LHS) and
right-hand-side (RHS) of the assignment operator must be of the same
type. For real-time values assignment is by copy of the RHS value to the
assigned variable on the LHS.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// Combined declaration and assignment</span>

<span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// Assign b to a</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// False</span>
<span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">10</span><span class="p">;</span><span class="w"> </span><span class="c1">// True</span>
</pre></div>
</div>
</section>
<section id="classical-bits-and-registers">
<h3>Classical bits and registers<a class="headerlink" href="#classical-bits-and-registers" title="Permalink to this heading">¶</a></h3>
<p>Classical registers, <code class="docutils literal notranslate"><span class="pre">bit</span></code>, <code class="docutils literal notranslate"><span class="pre">uint</span></code> and <code class="docutils literal notranslate"><span class="pre">angle</span></code> support bitwise operators
and the corresponding assignment operators with registers of the same size:
and <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, or <code class="docutils literal notranslate"><span class="pre">|</span></code>, xor <code class="docutils literal notranslate"><span class="pre">^</span></code>. They support left shift <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> and right shift
<code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> by an unsigned integer, and the corresponding assignment operators. The
shift operators shift bits off the end. They also support bitwise negation <code class="docutils literal notranslate"><span class="pre">~</span></code>,
<code class="docutils literal notranslate"><span class="pre">popcount</span></code> <a class="footnote-reference brackets" href="#id5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, and left and right circular shift, <code class="docutils literal notranslate"><span class="pre">rotl</span></code> and <code class="docutils literal notranslate"><span class="pre">rotr</span></code>,
respectively.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">bit</span><span class="p">[</span><span class="m">8</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">&quot;10001111&quot;</span><span class="p">;</span>
<span class="kt">bit</span><span class="p">[</span><span class="m">8</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mb">&quot;01110000&quot;</span><span class="p">;</span>

<span class="n">a</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// Bit shift left produces &quot;00011110&quot;</span>
<span class="nb">rotl</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="c1">// Produces &quot;00111110&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// Produces &quot;11111111&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// Produces &quot;00000000&quot;</span>
</pre></div>
</div>
<p>For <code class="docutils literal notranslate"><span class="pre">uint</span></code> and <code class="docutils literal notranslate"><span class="pre">angle</span></code>, the results of these operations are defined as if
the operations were applied to their defined bit representations:</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">8</span><span class="p">);</span><span class="w">  </span><span class="c1">// &quot;1001&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w">  </span><span class="c1">// Produces pi/2, which is &quot;0100&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w">  </span><span class="c1">// Produces pi/4, which is &quot;0010&quot;</span>

<span class="kt">uint</span><span class="p">[</span><span class="m">6</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">37</span><span class="p">;</span><span class="w">  </span><span class="c1">// &quot;100101&quot;</span>
<span class="nb">popcount</span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="w">  </span><span class="c1">// Produces 3.</span>
<span class="nb">rotl</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">);</span><span class="w">   </span><span class="c1">// Produces 44, which is &quot;101100&quot;</span>
</pre></div>
</div>
</section>
<section id="comparison-boolean-instructions">
<h3>Comparison (Boolean) Instructions<a class="headerlink" href="#comparison-boolean-instructions" title="Permalink to this heading">¶</a></h3>
<p>Integers, angles, bits, and classical registers can
be compared (<span class="math notranslate nohighlight">\(&gt;\)</span>, <span class="math notranslate nohighlight">\(&gt;=\)</span>, <span class="math notranslate nohighlight">\(&lt;\)</span>, <span class="math notranslate nohighlight">\(&lt;=\)</span>, <span class="math notranslate nohighlight">\(==\)</span>,
<span class="math notranslate nohighlight">\(!=\)</span>) and yield Boolean values. Boolean values support logical
operators: and <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>, or <code class="docutils literal notranslate"><span class="pre">||</span></code>, not <code class="docutils literal notranslate"><span class="pre">!</span></code>. The keyword <code class="docutils literal notranslate"><span class="pre">in</span></code> tests if an integer belongs to
an index set, for example <code class="docutils literal notranslate"><span class="pre">i</span> <span class="pre">in</span> <span class="pre">{0,3}</span></code> returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if i equals 0 or 3 and <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="p">;</span>
<span class="kt">float</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="p">;</span>

<span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">false</span><span class="p">;</span><span class="w"> </span><span class="c1">// True</span>
<span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">bool</span><span class="p">(</span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// False</span>
<span class="n">c</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// True</span>
<span class="n">d</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="no">pi</span><span class="p">;</span><span class="w"> </span><span class="c1">// True</span>
<span class="c1">// Susceptible to floating point casting errors</span>
<span class="n">e</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">float</span><span class="p">(</span><span class="n">d</span><span class="p">);</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Angles are naturally defined on a ring, and so comparisons may not work
exactly how you might expect.  For example, <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">*</span> <span class="pre">ang</span> <span class="pre">&gt;=</span> <span class="pre">ang</span></code> is not
necessarily true; if <code class="docutils literal notranslate"><span class="pre">ang</span></code> represents the angle <span class="math notranslate nohighlight">\(3\pi/2\)</span>, then
<code class="docutils literal notranslate"><span class="pre">2*ang</span> <span class="pre">==</span> <span class="pre">pi</span></code> and <code class="docutils literal notranslate"><span class="pre">pi</span> <span class="pre">&lt;</span> <span class="pre">ang</span></code>.</p>
<p>This is the same behavior as unsigned integers in many languages (including
OpenQASM 3), but the types of operation commonly performed on <code class="docutils literal notranslate"><span class="pre">angle</span></code> are
particularly likely to trigger these modulo arithmetic effects.</p>
</div>
</section>
<section id="integers">
<h3>Integers<a class="headerlink" href="#integers" title="Permalink to this heading">¶</a></h3>
<p>Integer types support addition <code class="docutils literal notranslate"><span class="pre">+</span></code>, subtraction <code class="docutils literal notranslate"><span class="pre">-</span></code>, multiplication <code class="docutils literal notranslate"><span class="pre">*</span></code>, integer division <a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> <code class="docutils literal notranslate"><span class="pre">/</span></code>, modulo <code class="docutils literal notranslate"><span class="pre">%</span></code>, and power <code class="docutils literal notranslate"><span class="pre">**</span></code>, as well as the corresponding assignments <code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code>, <code class="docutils literal notranslate"><span class="pre">*=</span></code>, <code class="docutils literal notranslate"><span class="pre">/=</span></code>, <code class="docutils literal notranslate"><span class="pre">%=</span></code>, and <code class="docutils literal notranslate"><span class="pre">**=</span></code>.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">3</span><span class="p">;</span>

<span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 6</span>
<span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1</span>
<span class="n">b</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="c1">// 1</span>
<span class="n">a</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 8</span>
<span class="n">a</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">4</span><span class="p">;</span><span class="w"> </span><span class="c1">// a == 6</span>
</pre></div>
</div>
</section>
<section id="angles">
<h3>Angles<a class="headerlink" href="#angles" title="Permalink to this heading">¶</a></h3>
<p>In addition to the bitwise operations mentioned above, angles support:</p>
<ul class="simple">
<li><p>Addition <code class="docutils literal notranslate"><span class="pre">+</span></code> and subtraction <code class="docutils literal notranslate"><span class="pre">-</span></code> by other angles of the same size, which
returns an angle of the same size.</p></li>
<li><p>Multiplication <code class="docutils literal notranslate"><span class="pre">*</span></code> and division <code class="docutils literal notranslate"><span class="pre">/</span></code> by unsigned integers of the same size.
The result is an <code class="docutils literal notranslate"><span class="pre">angle</span></code> type of the same size.  Both <code class="docutils literal notranslate"><span class="pre">uint</span> <span class="pre">*</span> <span class="pre">angle</span></code> and
<code class="docutils literal notranslate"><span class="pre">angle</span> <span class="pre">*</span> <span class="pre">uint</span></code> are valid and produce the same result, but only <code class="docutils literal notranslate"><span class="pre">angle</span> <span class="pre">/</span>
<span class="pre">uint</span></code> is valid; it is not allowed to divide an integer by an angle.</p></li>
<li><p>Division <code class="docutils literal notranslate"><span class="pre">/</span></code> by another angle of the same size.  This returns a <code class="docutils literal notranslate"><span class="pre">uint</span></code> of
the same size.</p></li>
<li><p>Unary negation <code class="docutils literal notranslate"><span class="pre">-</span></code>, which represents the mathematical operation <span class="math notranslate nohighlight">\(-a
\equiv 2\pi - a\)</span>.</p></li>
<li><p>Compound assignment operators <code class="docutils literal notranslate"><span class="pre">+=</span></code>, <code class="docutils literal notranslate"><span class="pre">-=</span></code> and <code class="docutils literal notranslate"><span class="pre">/=</span></code> with angles of the
same size as both left- and right operands.  These have the same effect as if
the equivalent binary operation had been written out in full.</p></li>
<li><p>The compound assignment operators <code class="docutils literal notranslate"><span class="pre">*=</span></code> and <code class="docutils literal notranslate"><span class="pre">/=</span></code> with an unsigned integer
of the same size as the right operand.  This has the same effect as if the
multiplication or division had been written as a binary operation and
assigned.</p></li>
</ul>
<p>In all of these cases, except for unary negation, the bit pattern of the result
of these operations is the same as if the operations had been carried out
between two <code class="docutils literal notranslate"><span class="pre">uint</span></code> types of the same size with the same bit representations,
including both upper and lower overflow.  Explicitly:</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">7</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">8</span><span class="p">);</span><span class="w">  </span><span class="c1">// &quot;0111&quot;</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">8</span><span class="p">;</span><span class="w">        </span><span class="c1">// &quot;0001&quot;</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">4</span><span class="p">);</span><span class="w">  </span><span class="c1">// &quot;1010&quot;</span>
<span class="kt">uint</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">two</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>

<span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">    </span><span class="c1">// angle[4] │ pi           │ &quot;1000&quot;</span>
<span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">    </span><span class="c1">// angle[4] │ 5 * (pi / 4) │ &quot;1010&quot;</span>
<span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">two</span><span class="p">;</span><span class="w">  </span><span class="c1">// angle[4] │ 3 * (pi / 8) │ &quot;0011&quot;</span>
<span class="n">two</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">c</span><span class="p">;</span><span class="w">  </span><span class="c1">// angle[4] │ pi / 2       │ &quot;0100&quot;</span>
<span class="n">c</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">    </span><span class="c1">// uint[4]  │ 10           │ &quot;1010&quot;</span>
<span class="no">pi</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w">   </span><span class="c1">// angle[4] │ 0            │ &quot;0000&quot;</span>
</pre></div>
</div>
<p>Unary negation of an angle <code class="docutils literal notranslate"><span class="pre">a</span></code> is defined to produce the same value as
<code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">-</span> <span class="pre">a</span></code>, such that <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+</span> <span class="pre">(-a)</span></code> is always equal to zero.  This is the same as
the C99 definition for unsigned integers.  In bitwise operations, the negation
can be written as <code class="docutils literal notranslate"><span class="pre">(~a)</span> <span class="pre">+</span> <span class="pre">1</span></code>. Explicitly:</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">4</span><span class="p">;</span><span class="w">  </span><span class="c1">// &quot;0010&quot;</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="n">a</span><span class="p">;</span><span class="w">  </span><span class="c1">// 7*(pi/4) │ &quot;1110&quot;</span>
</pre></div>
</div>
</section>
<section id="floating-point-numbers">
<h3>Floating-point numbers<a class="headerlink" href="#floating-point-numbers" title="Permalink to this heading">¶</a></h3>
<p>Floating-point numbers support addition, subtraction, multiplication, division,
and power and the corresponding assignment operators.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">angle</span><span class="p">[</span><span class="m">20</span><span class="p">]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="m">2</span><span class="p">;</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">20</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">pi</span><span class="p">;</span>
<span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 3/2 * pi</span>
<span class="n">a</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w"> </span><span class="c1">// 4.1316...</span>
<span class="kt">angle</span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="w"> </span><span class="n">c</span><span class="p">;</span>
<span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">angle</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w"> </span><span class="c1">// cast to angle[10]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Real hardware may well not have access to floating-point operations at
runtime.  OpenQASM 3 compilers may reject programs that require runtime
operations on these values if the target backend does not support them.</p>
</div>
</section>
<section id="complex-numbers">
<h3>Complex numbers<a class="headerlink" href="#complex-numbers" title="Permalink to this heading">¶</a></h3>
<p>Complex numbers support addition, subtraction, multiplication, division, power
and the corresponding assignment operators.  These binary operators follow
analogous semantics to those described in Annex G (section G.5) of the C99
specification (note that OpenQASM 3.0 has no <em>imaginary</em> type, only <em>complex</em>).
These operations use the floating-point semantics of the underlying component
floating-point types, including their <code class="docutils literal notranslate"><span class="pre">NaN</span></code> propagation, and
hardware-dependent rounding mode and subnormal handling.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mf">5.0im</span><span class="p">;</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">2.0</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mf">7.0im</span><span class="p">;</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">   </span><span class="c1">// c = 8.0 - 2.0im</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">   </span><span class="c1">// d = 12.0+12.0im;</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">   </span><span class="c1">// e = 15.0-80.0im;</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">   </span><span class="c1">// f = (-55.0+60.0im)/53.0</span>
<span class="kt">complex</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]]</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">**</span><span class="w"> </span><span class="n">b</span><span class="p">;</span><span class="w">  </span><span class="c1">// g = (0.10694695640729072+0.17536481119721312im)</span>
</pre></div>
</div>
</section>
<section id="evaluation-order">
<h3>Evaluation order<a class="headerlink" href="#evaluation-order" title="Permalink to this heading">¶</a></h3>
<p>OpenQASM evaluates expressions from left to right.</p>
<blockquote>
<div><table class="docutils align-default" id="id8">
<caption><span class="caption-number">Table 3 </span><span class="caption-text">[operator-precedence] operator precedence in OpenQASM ordered from highest precedence to lowest precedence. Higher precedence operators will be evaluated first.</span><a class="headerlink" href="#id8" title="Permalink to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p>Operator</p></td>
<td><p>Operator Types</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">()</span></code>, <code class="docutils literal notranslate"><span class="pre">[]</span></code>, <code class="docutils literal notranslate"><span class="pre">(type)(x)</span></code></p></td>
<td><p>Call, index, cast</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">**</span></code></p></td>
<td><p>Power</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">!</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">~</span></code></p></td>
<td><p>Unary</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code></p></td>
<td><p>Multiplicative</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code></p></td>
<td><p>Additive</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code></p></td>
<td><p>Bit Shift</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p>Comparison</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code></p></td>
<td><p>Equality</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></td>
<td><p>Bitwise AND</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">^</span></code></p></td>
<td><p>Bitwise XOR</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">|</span></code></p></td>
<td><p>Bitwise OR</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code></p></td>
<td><p>Logical AND</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">||</span></code></p></td>
<td><p>Logical OR</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="looping-and-branching">
<h3>Looping and branching<a class="headerlink" href="#looping-and-branching" title="Permalink to this heading">¶</a></h3>
<section id="if-else-statements">
<h4>If-else statements<a class="headerlink" href="#if-else-statements" title="Permalink to this heading">¶</a></h4>
<p>The statement <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">(</span> <span class="pre">bool</span> <span class="pre">)</span> <span class="pre">&lt;true-body&gt;</span></code> branches to program if the Boolean evaluates to true and
may optionally be followed by <code class="docutils literal notranslate"><span class="pre">else</span> <span class="pre">&lt;false-body&gt;</span></code>.  Both <code class="docutils literal notranslate"><span class="pre">true-body</span></code> and
<code class="docutils literal notranslate"><span class="pre">false-body</span></code> can be a single statement terminated by a semicolon, or a program
block of several statements <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">stmt1;</span> <span class="pre">stmt2;</span> <span class="pre">}</span></code>.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">false</span><span class="p">;</span>
<span class="kt">qubit</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="nf">h</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<span class="kt">bit</span><span class="w"> </span><span class="kt">output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">measure</span><span class="w"> </span><span class="kt">qubit</span>

<span class="c1">// example of branching</span>
<span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">target</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">output</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// do something</span>
<span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// do something else</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="for-loops">
<h4>For loops<a class="headerlink" href="#for-loops" title="Permalink to this heading">¶</a></h4>
<p>The statement <code class="docutils literal notranslate"><span class="pre">for</span> <span class="pre">&lt;type&gt;</span> <span class="pre">&lt;name&gt;</span> <span class="pre">in</span> <span class="pre">&lt;values&gt;</span> <span class="pre">&lt;body&gt;</span></code> loops over the
items in <code class="docutils literal notranslate"><span class="pre">values</span></code>, assigning each value to the variable <code class="docutils literal notranslate"><span class="pre">name</span></code> in subsequent
iterations of the loop <code class="docutils literal notranslate"><span class="pre">body</span></code>.  <code class="docutils literal notranslate"><span class="pre">values</span></code> can be:</p>
<ul class="simple">
<li><p>a discrete set of scalar types, defined using the
<a class="reference internal" href="types.html#types-arrays"><span class="std std-ref">array-literal syntax</span></a>, such as <code class="docutils literal notranslate"><span class="pre">{1,</span> <span class="pre">2,</span> <span class="pre">3}</span></code>.  Each value
in the set must be able to be implicitly promoted to the type <code class="docutils literal notranslate"><span class="pre">type</span></code>.</p></li>
<li><p>a range expression in square brackets of the form <code class="docutils literal notranslate"><span class="pre">[start</span> <span class="pre">:</span> <span class="pre">(step</span> <span class="pre">:)?</span> <span class="pre">stop]</span></code>,
where <code class="docutils literal notranslate"><span class="pre">step</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">1</span></code> if omitted.  As in other range expressions,
the range is inclusive at both ends.  Both <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code> must be
given.  All three values must be of integer or unsigned-integer types.  The
scalar type of elements in the resulting range expression is the same as the
type of result of the <a class="reference internal" href="types.html#implicit-promotion-rules"><span class="std std-ref">implicit promotion</span></a>
between <code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code>.  For example, if <code class="docutils literal notranslate"><span class="pre">start</span></code> is a <code class="docutils literal notranslate"><span class="pre">uint[8]</span></code>
and <code class="docutils literal notranslate"><span class="pre">stop</span></code> is an <code class="docutils literal notranslate"><span class="pre">int[16]</span></code>, the values to be assigned will all be of type
<code class="docutils literal notranslate"><span class="pre">int[16]</span></code>.</p></li>
<li><p>a value of type <code class="docutils literal notranslate"><span class="pre">bit[n]</span></code>, or the target of a <code class="docutils literal notranslate"><span class="pre">let</span></code> statement that creates
an alias to classical bits.  The corresponding scalar type of the loop
variable is <code class="docutils literal notranslate"><span class="pre">bit</span></code>, as appropriate.</p></li>
<li><p>a value of type <code class="docutils literal notranslate"><span class="pre">array[&lt;scalar&gt;,</span> <span class="pre">n]</span></code>, _i.e._ a one-dimensional
array.  Values of type <code class="docutils literal notranslate"><span class="pre">scalar</span></code> must be able to be implicitly promoted to
values of type <code class="docutils literal notranslate"><span class="pre">type</span></code>.  Modification of the loop variable does not change
the corresponding value in the array.</p></li>
</ul>
<p>It is valid to use an indexing expression (e.g. <code class="docutils literal notranslate"><span class="pre">my_array[1:3]</span></code>) to arrive at
one of the types given above.  In the cases of sets, <code class="docutils literal notranslate"><span class="pre">bit[n]</span></code>, classical
aliases and <code class="docutils literal notranslate"><span class="pre">array</span></code>, the iteration order is guaranteed to be in sequential
index order, that is <code class="docutils literal notranslate"><span class="pre">iden[0]</span></code> then <code class="docutils literal notranslate"><span class="pre">iden[1]</span></code>, and so on.</p>
<p>The loop body can either be a single statement terminated by a semicolon, or a
program block in curly braces <code class="docutils literal notranslate"><span class="pre">{}</span></code> containing several statements.</p>
<p>Assigning a value to the loop variable within an iteration over the body does
not affect the next value that the loop variable will take.</p>
<p>The scope of the loop variable is limited to the body of the loop.  It is not
accessible after the loop.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="c1">// loop over a discrete set of values</span>
<span class="k">for</span><span class="w"> </span><span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">{</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">10</span><span class="p">}</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">b</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="p">}</span>
<span class="c1">// b == 16, and i is not in scope.</span>

<span class="c1">// loop over every even integer from 0 to 20 using a range, and call a</span>
<span class="c1">// subroutine with that value.</span>
<span class="k">for</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">[</span><span class="m">0</span><span class="p">:</span><span class="m">2</span><span class="p">:</span><span class="m">20</span><span class="p">]</span>
<span class="w">   </span><span class="nf">subroutine</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>

<span class="c1">// high precision typed loop variable</span>
<span class="k">for</span><span class="w"> </span><span class="kt">uint</span><span class="p">[</span><span class="m">64</span><span class="p">]</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">[</span><span class="m">4294967296</span><span class="p">:</span><span class="m">4294967306</span><span class="p">]</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// do something</span>
<span class="p">}</span>

<span class="c1">// Loop over an array of floats.</span>
<span class="kt">array</span><span class="p">[</span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">],</span><span class="w"> </span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="n">my_floats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">1.2</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mf">3.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">9.8</span><span class="p">};</span>
<span class="k">for</span><span class="w"> </span><span class="kt">float</span><span class="p">[</span><span class="m">64</span><span class="p">]</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">my_floats</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">// do something with &#39;f&#39;</span>
<span class="p">}</span>

<span class="c1">// Loop over a register of bits.</span>
<span class="kt">bit</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w"> </span><span class="n">register</span><span class="p">;</span>
<span class="k">for</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">register</span><span class="w"> </span><span class="p">{}</span>
<span class="kd">let</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">register</span><span class="p">[</span><span class="m">1</span><span class="p">:</span><span class="m">3</span><span class="p">];</span>
<span class="k">for</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">alias</span><span class="w"> </span><span class="p">{}</span>
</pre></div>
</div>
</section>
<section id="while-loops">
<h4>While loops<a class="headerlink" href="#while-loops" title="Permalink to this heading">¶</a></h4>
<p>The statement <code class="docutils literal notranslate"><span class="pre">while</span> <span class="pre">(</span> <span class="pre">bool</span> <span class="pre">)</span> <span class="pre">&lt;body&gt;</span></code> executes program until the Boolean evaluates to
false <a class="footnote-reference brackets" href="#id7" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. Variables in the loop condition statement may be modified
within the while loop body.  The <code class="docutils literal notranslate"><span class="pre">body</span></code> can be either a single statement
terminated by a semicolon, or a program block in curly braces <code class="docutils literal notranslate"><span class="pre">{}</span></code> of several
statements:</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">qubit</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
<span class="kt">bit</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>

<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>
<span class="c1">// Keep applying hadamards and measuring a qubit</span>
<span class="c1">// until 10, |1&gt;s are measured</span>
<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nf">h</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">measure</span><span class="w"> </span><span class="n">q</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="breaking-and-continuing-loops">
<h4>Breaking and continuing loops<a class="headerlink" href="#breaking-and-continuing-loops" title="Permalink to this heading">¶</a></h4>
<p>The statement <code class="docutils literal notranslate"><span class="pre">break;</span></code> moves control to the statement immediately following
the closest containing <code class="docutils literal notranslate"><span class="pre">for</span></code> or <code class="docutils literal notranslate"><span class="pre">while</span></code> loop.</p>
<p>The statement <code class="docutils literal notranslate"><span class="pre">continue;</span></code> causes execution to jump to the next step in the
closest containing <code class="docutils literal notranslate"><span class="pre">for</span></code> or <code class="docutils literal notranslate"><span class="pre">while</span></code> loop.  In a <code class="docutils literal notranslate"><span class="pre">while</span></code> loop, this point
is the evaluation of the loop condition.  In a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, this is the
assignment of the next value of the loop variable, or the end of the loop if the
current value is the last in the set.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="p">[</span><span class="m">32</span><span class="p">]</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">;</span>

<span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">i</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="m">1</span><span class="p">;</span>
<span class="w">    </span><span class="c1">// continue to next loop iteration</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">continue</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// some program</span>

<span class="w">    </span><span class="c1">// break out of loop</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">break</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// more program</span>
<span class="p">}</span>
</pre></div>
</div>
<p>It is an error to have a <code class="docutils literal notranslate"><span class="pre">break;</span></code> or <code class="docutils literal notranslate"><span class="pre">continue;</span></code> statement outside a loop,
such as at the top level of the main circuit or of a subroutine.</p>
<div class="highlight-qasm3 notranslate"><div class="highlight"><pre><span></span><span class="cp">OPENQASM</span><span class="w"> </span><span class="l">3.0</span><span class="p">;</span>

<span class="k">break</span><span class="p">;</span><span class="w">  </span><span class="c1">// Invalid: no containing loop.</span>

<span class="kd">def</span><span class="w"> </span><span class="nf">fn</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">continue</span><span class="p">;</span><span class="w"> </span><span class="c1">// Invalid: no containing loop.</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="terminating-the-program-early">
<h4>Terminating the program early<a class="headerlink" href="#terminating-the-program-early" title="Permalink to this heading">¶</a></h4>
<p>The statement <code class="docutils literal notranslate"><span class="pre">end;</span></code> immediately terminates the program, no matter what scope
it is called from.</p>
</section>
</section>
</section>
<section id="extern-function-calls">
<h2>Extern function calls<a class="headerlink" href="#extern-function-calls" title="Permalink to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">extern</span></code> functions are declared by giving their signature using the
statement <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">name(inputs)</span> <span class="pre">-&gt;</span> <span class="pre">output;</span></code> where <code class="docutils literal notranslate"><span class="pre">inputs</span></code> is a comma-separated list of type
names and <code class="docutils literal notranslate"><span class="pre">output</span></code> is a single type name. The parentheses may be omitted if there are no <code class="docutils literal notranslate"><span class="pre">inputs</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">extern</span></code> functions can take of any number of arguments whose types correspond to the classical
types of OpenQASM. Inputs are passed by value. They can return zero or one value whose type
is any classical type in OpenQASM except real constants. If necessary,
multiple return values can be accommodated by concatenating registers.
The type and size of each argument must be known at compile time to
define data flow and enable scheduling. We do not address issues such as
how the <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions are defined and registered.</p>
<p><code class="docutils literal notranslate"><span class="pre">extern</span></code> functions are invoked using the statement <code class="docutils literal notranslate"><span class="pre">name(inputs);</span></code> and the result may be
assigned to <code class="docutils literal notranslate"><span class="pre">output</span></code> as needed via an assignment operator (<code class="docutils literal notranslate"><span class="pre">=</span></code>, <code class="docutils literal notranslate"><span class="pre">+=</span></code>, etc). <code class="docutils literal notranslate"><span class="pre">inputs</span></code> are
literals and <code class="docutils literal notranslate"><span class="pre">output</span></code> is a variable, corresponding to the types in the signature. The functions
are not required to be idempotent. They may change the state of the process providing the function.
In our computational model, <code class="docutils literal notranslate"><span class="pre">extern</span></code> functions may run concurrently with other classical and
quantum computations. That is, invoking an <code class="docutils literal notranslate"><span class="pre">extern</span></code> function will  <em>schedule</em> a classical
computation, but does not wait for that computation to terminate.</p>
</section>
<section id="further-reserved-keywords">
<h2>Further reserved keywords<a class="headerlink" href="#further-reserved-keywords" title="Permalink to this heading">¶</a></h2>
<p>The keywords <code class="docutils literal notranslate"><span class="pre">switch</span></code>, <code class="docutils literal notranslate"><span class="pre">case</span></code> and <code class="docutils literal notranslate"><span class="pre">default</span></code> are reserved for future
expansion of the language.  These words are not valid identifiers.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p><code class="docutils literal notranslate"><span class="pre">popcount</span></code> computes the Hamming weight of the input register.</p>
</aside>
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>If multiplication and division instructions are not available in
hardware, they can be implemented by expanding into other
instructions.</p>
</aside>
<aside class="footnote brackets" id="id7" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">3</a><span class="fn-bracket">]</span></span>
<p>This clearly allows users to write code that does not terminate. We
do not discuss implementation details here, but one possibility is to
compile into target code that imposes iteration limits.</p>
</aside>
</aside>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">OpenQASM Live Specification</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Language</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="comments.html">Comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="comments.html#version-string">Version string</a></li>
<li class="toctree-l2"><a class="reference internal" href="comments.html#included-files">Included files</a></li>
<li class="toctree-l2"><a class="reference internal" href="types.html">Types and Casting</a></li>
<li class="toctree-l2"><a class="reference internal" href="gates.html">Gates</a></li>
<li class="toctree-l2"><a class="reference internal" href="insts.html">Built-in quantum instructions</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Classical instructions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#low-level-classical-instructions">Low-level classical instructions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#extern-function-calls">Extern function calls</a></li>
<li class="toctree-l3"><a class="reference internal" href="#further-reserved-keywords">Further reserved keywords</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="subroutines.html">Subroutines</a></li>
<li class="toctree-l2"><a class="reference internal" href="scope.html">Scoping of variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="directives.html">Directives</a></li>
<li class="toctree-l2"><a class="reference internal" href="directives.html#input-output">Input/output</a></li>
<li class="toctree-l2"><a class="reference internal" href="delays.html">Circuit timing</a></li>
<li class="toctree-l2"><a class="reference internal" href="pulses.html">Pulse-level descriptions of gates and measurement</a></li>
<li class="toctree-l2"><a class="reference internal" href="openpulse.html">OpenPulse Grammar</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../grammar/index.html">OpenQasm 3.0 Grammar</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes.html">Release Notes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Language</a><ul>
      <li>Previous: <a href="insts.html" title="previous chapter">Built-in quantum instructions</a></li>
      <li>Next: <a href="subroutines.html" title="next chapter">Subroutines</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017-2020, Andrew W. Cross, Lev S. Bishop, John A. Smolin, Jay M. Gambetta.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 6.1.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="../_sources/language/classical.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>